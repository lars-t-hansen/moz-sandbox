;;; -*- mode: scheme -*-

(defmodule while_test

  (defun+ (run (n i32) -> i32)
    (let ((i 0))
      (while (> n 0)
	     (set! i (+ i n))
	     (dec! n))
      i)))

(js "
var ins = new WebAssembly.Instance(while_test.module, {lib:while_test.lib});
assertEq(ins.exports.run(10), 55);
")
