;;; -*- mode: scheme -*-

(defmodule test

  (defclass Ipso
    (x f32))
  
  (defclass Box (extends Ipso)
    (value i32)
    (next Other))

  (defclass Other
    (next Box))

  (defun+ (check_null (p Box) -> i32)
    (null? p))

  (defun+ (make_null -> Box)
    (null Box))

  (defun+ (get (p Box) -> i32)
    (*value p))

  (defun+ (set (p Box) (v i32))
    (set! (*value p) v))

  )
